<script src="https://clever-ext.boost.ai/chatPanel/chatPanel.js"></script>
<script>
  var boost = window.boostInit("clever-ext", {
      chatPanel: {
          settings: {
              startLanguage: "da-DK",
              openTextLinksInNewTab: true
          }
      }
  });

  function openChat() {
    if (window.boost && window.boost.chatPanel) {
      window.boost.chatPanel.show();
    } else {
      console.log('Boost.ai chat panel not ready yet');
      setTimeout(openChat, 500);
    }
  }

  // Auto-åbn chat hvis brugeren kommer fra SMS
  function checkAndOpenChat() {
    var urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('source') === 'sms' || urlParams.get('fra') === 'sms') {
      console.log('SMS bruger detekteret - åbner chat automatisk');
      openChat();
    }
  }

  // Start når siden er loaded
  window.addEventListener('load', function() {
    setTimeout(checkAndOpenChat, 1500);
  });

  // Test knap - tilføj midlertidigt for at teste
  setTimeout(function() {
    var testButton = document.createElement('button');
    testButton.innerHTML = 'Test Chat';
    testButton.style.position = 'fixed';
    testButton.style.bottom = '20px';
    testButton.style.right = '20px';
    testButton.style.zIndex = '99999';
    testButton.onclick = openChat;
    document.body.appendChild(testButton);
  }, 2000);
</script>
